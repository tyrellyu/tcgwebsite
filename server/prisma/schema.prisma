// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      =env("DATABASE_URL")
}


model Users {
  userId String @id
  name   String
  email  String
}

model Cards {
  cardId        String      @id
  name          String
  num           String
  set           String
  price         Int
  rarity        String
  quantity      Int
  soldCards      SoldCards[]
  boughtCards    BoughtCards[]
}


model SoldCards {
  saleId      String   @id
  cardId      String
  dateSold    DateTime
  quantity    Int
  cardPrice   Int
  totalAmount Int
  card        Cards @relation(fields: [cardId], references: [cardId])
}

model BoughtCards {
  purchaseId    String   @id
  cardId        String
  purchaseDate  DateTime
  quantity      Int
  cardCost      Int
  totalCost     Int
  card       Cards @relation(fields: [cardId], references: [cardId])
}

model Collection {
  collectionId String   @id
  category  String
  amount    Float
  timestamp DateTime
}

model SoldCardSummary {
  soldCardSummaryId   String   @id
  totalValue          Float
  changePercentage    Float?
  date                DateTime
}

model BoughtCardSummary {
  boughtCardSummaryId String   @id
  totalPurchased      Float
  changePercentage    Float?
  date                DateTime
}

model CollectionSummary {
  collectionSummaryId  String   @id
  totalExpenses        Float
  date                 DateTime
  CollectionByCategory CollectionByCategory[]
}

model CollectionByCategory {
  collectionByCategoryId String         @id
  collectionSummaryId    String
  category               String
  amount                 BigInt
  date                   DateTime
  collectionSummary     CollectionSummary @relation(fields: [collectionSummaryId], references: [collectionSummaryId])
}

